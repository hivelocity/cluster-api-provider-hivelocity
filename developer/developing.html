<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Developing - Cluster API Provider Hivelocity</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Documentation for CAPHV">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/css/custom.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../user/index.html"><strong aria-hidden="true">1.</strong> User Guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../user/introduction.html"><strong aria-hidden="true">1.1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../user/getting-started.html"><strong aria-hidden="true">1.2.</strong> Getting Started</a></li><li class="chapter-item expanded "><a href="../topics/index.html"><strong aria-hidden="true">1.3.</strong> Topics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../topics/provisioning-machines.html"><strong aria-hidden="true">1.3.1.</strong> Provisioning Machines</a></li><li class="chapter-item expanded "><a href="../topics/environment-variables.html"><strong aria-hidden="true">1.3.2.</strong> Environment Variables</a></li><li class="chapter-item expanded "><a href="../topics/make-watch.html"><strong aria-hidden="true">1.3.3.</strong> make watch</a></li><li class="chapter-item expanded "><a href="../topics/hivelocity-api.html"><strong aria-hidden="true">1.3.4.</strong> Hivelocity API</a></li><li class="chapter-item expanded "><a href="../topics/hivelocity-ipmi.html"><strong aria-hidden="true">1.3.5.</strong> Hivelocity IPMI</a></li><li class="chapter-item expanded "><a href="../topics/clarifying-scope.html"><strong aria-hidden="true">1.3.6.</strong> Clarifying Scope</a></li><li class="chapter-item expanded "><a href="../topics/csr_controller.html"><strong aria-hidden="true">1.3.7.</strong> CSR Controller</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../developer/index.html"><strong aria-hidden="true">2.</strong> Developer Guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../developer/repository-layout.html"><strong aria-hidden="true">2.1.</strong> Repository Layout</a></li><li class="chapter-item expanded "><a href="../developer/setup.html"><strong aria-hidden="true">2.2.</strong> Setup Dev Env</a></li><li class="chapter-item expanded "><a href="../developer/tilt.html"><strong aria-hidden="true">2.3.</strong> Tilt</a></li><li class="chapter-item expanded "><a href="../developer/developing.html" class="active"><strong aria-hidden="true">2.4.</strong> Developing</a></li><li class="chapter-item expanded "><a href="../developer/logging.html"><strong aria-hidden="true">2.5.</strong> Logging</a></li><li class="chapter-item expanded "><a href="../developer/testing.html"><strong aria-hidden="true">2.6.</strong> Testing</a></li><li class="chapter-item expanded "><a href="../developer/ci.html"><strong aria-hidden="true">2.7.</strong> CI</a></li><li class="chapter-item expanded "><a href="../developer/e2e.html"><strong aria-hidden="true">2.8.</strong> E2E tests</a></li><li class="chapter-item expanded "><a href="../developer/docs.html"><strong aria-hidden="true">2.9.</strong> Docs</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/index.html"><strong aria-hidden="true">3.</strong> Reference Guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../crd/index.html"><strong aria-hidden="true">3.1.</strong> CRD Reference</a></li><li class="chapter-item expanded "><a href="../reference/glossary.html"><strong aria-hidden="true">3.2.</strong> Glossary</a></li><li class="chapter-item expanded "><a href="../reference/ports.html"><strong aria-hidden="true">3.3.</strong> Ports</a></li><li class="chapter-item expanded "><a href="../reference/jobs.html"><strong aria-hidden="true">3.4.</strong> Jobs</a></li><li class="chapter-item expanded "><a href="../reference/code-of-conduct.html"><strong aria-hidden="true">3.5.</strong> Code of Conduct</a></li><li class="chapter-item expanded "><a href="../reference/CONTRIBUTING.html"><strong aria-hidden="true">3.6.</strong> Contributing</a></li><li class="chapter-item expanded "><a href="../reference/versions.html"><strong aria-hidden="true">3.7.</strong> Version Support</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Cluster API Provider Hivelocity</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/hivelocity/cluster-api-provider-hivelocity/tree/main/docs/book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/hivelocity/cluster-api-provider-hivelocity/edit/main/docs/book/src/" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="developing-cluster-api-provider-hivelocity"><a class="header" href="#developing-cluster-api-provider-hivelocity">Developing Cluster API Provider Hivelocity</a></h1>
<p>Developing our provider is quite easy. First, you need to install some base requirements. Second, you need to follow the quickstart documents to set up everything related to Hivelocity. Third, you need to configure your Tilt set-up. After having done those three steps, you can start developing with the local Kind cluster and the Tilt UI to create one of the different workload clusters that are already pre-configured.</p>
<h2 id="why-tilt"><a class="header" href="#why-tilt">Why Tilt</a></h2>
<p>Provider Integration development requires a lot of iteration, and the “build, tag, push, update deployment” workflow can be very tedious.</p>
<p>Tilt makes this process much simpler by watching for updates and automatically building and deploying them.</p>
<p>You just need to update the Go code, and if it compiles, the caphv-controller-manager will get updated.</p>
<h2 id="updating-the-api-of-the-crds"><a class="header" href="#updating-the-api-of-the-crds">Updating the API of the CRDs</a></h2>
<p>If you update the API in some way, you need to run <code>make generate</code> in order to generate everything related to kubebuilder and the CRDs.</p>
<h2 id="deleting-the-cluster"><a class="header" href="#deleting-the-cluster">Deleting the cluster</a></h2>
<p>To tear down the workload cluster press the “Delete Workload Cluster” button. After a few minutes the resources should be deleted.</p>
<p>To tear down the kind cluster, use:</p>
<pre><code class="language-shell">$ make delete-cluster
</code></pre>
<p>To delete the registry, use: <code>make delete-registry</code> or <code>make delete-cluster-registry</code>.</p>
<h2 id="make-help"><a class="header" href="#make-help">make help</a></h2>
<p>If you have any trouble finding the right command, then you can use <code>make help</code> to get a list of all available make targets.</p>
<h2 id="submitting-prs-and-testing"><a class="header" href="#submitting-prs-and-testing">Submitting PRs and testing</a></h2>
<aside class="note info">
<p>Pull requests and issues are highly encouraged! For more information, please have a look in the <a href="../reference/CONTRIBUTING.html">Contribution Guidelines</a></p>
</aside>
<p>There are two important commands that you should make use of before creating the PR.</p>
<p>With <code>make verify</code> you can run all linting checks and others. Make sure that all of these checks pass - otherwise the PR cannot be merged. Note that you need to commit all changes for the last checks to pass.</p>
<p>With <code>make test</code> all unit tests are triggered. If they fail out of nowhere, then please re-run them. They are not 100% stable and sometimes there are tests failing due to something related to Kubernetes’ <code>envtest</code>.</p>
<p>With <code>make generate</code> new CRDs are generated, this is necessary if you change the api.</p>
<p>With <a href="../topics/make-watch.html">make watch</a> you can monitor the progress.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../developer/tilt.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../developer/logging.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../developer/tilt.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../developer/logging.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
